<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>Timbo Ebook</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">
  <script src="js/jquery.min.js"></script>
  <!-- Custom styles for this template -->
  <link href="./css/style.css" rel="stylesheet">
  <script type="text/javascript">
    $(document).ready(function(){

    	var socket_uri = "ws://192.168.0.17:9002/guidebook";
    	var sock = new WebSocket(socket_uri)

    	sock.onopen = function(){
    		console.log("open");
    		console.log("open connection");

    	}
    	sock.onclose = function(e){
    		console.log("closed connection");
    	}
    	sock.onmessage = function(e){
    		var jsondata = jQuery.parseJSON(e.data);
    		if(jsondata.command=="sound_play"){
    			document.getElementById('sound1').play();
    			console.log("sound play");
    		}
    	}

    	$("#id_btn_setting").click(function(){
    		data['service'] = "websocket_read";
    		data['command'] = "idsetting";
    		sock.send(JSON.stringify(data));
        });


    	$("#id_btn_dump_trajectory").click(function(){
    		var data = {}
    		data['service'] = "websocket_read";
    		data['command'] = "trajectory_dump";
        data['page'] = 1;
        data['module'] = 1;
    		sock.send(JSON.stringify(data));
        });

      $("#id_btn_play_trajectory").click(function(){
    		var data = {}
    		data['service'] = "websocket_read";
    		data['command'] = "trajectory_play";
        data['page'] = 1;
        data['module'] = 1;
    		sock.send(JSON.stringify(data));
        });

      $("#id_btn_record").click(function(){
    		var data = {}
    		data['service'] = "websocket_read";
    		data['command'] = "record";
    		sock.send(JSON.stringify(data));
        });

      $("#id_btn_play").click(function(){
    		var data = {}
    		data['service'] = "websocket_read";
    		data['command'] = "play";
    		sock.send(JSON.stringify(data));
        });

      $("#id_btn_stop").click(function(){
    		var data = {}
    		data['service'] = "websocket_read";
    		data['command'] = "stop";
    		sock.send(JSON.stringify(data));
        });

      $("#id_btn_ping").click(function(){
    		var data = {}
    		data['service'] = "websocket_read";
    		data['command'] = "ping";
    		sock.send(JSON.stringify(data));
        });

    });
  </script>
  <style type="text/css">

    #ebook_image{
      padding: 50%;
      background: url(./img/ebook1.png);
      -webkit-background-size: cover;
      -moz-background-size: cover;
      background-size: cover;
      -o-background-size: cover;
      background-repeat: no-repeat;
      position: relative;
      background-position: top;
      background-size: 100%;
    }

    .nav.navbar-nav {
      clear: left;
      float: left;
      margin: 0;
      padding: 0;
      position: relative;
      left: 50%;
      text-align: center;
    }

    .nav.navbar-nav>li {
      position: relative;
      right: 50%;
      padding-left: 15px;
      padding-right: 15px;
    }
  </style>
</head>

<body>
  <audio id="sound1" src="./sound/bark.mp3" type="audio/mpeg" controls preload="auto" autobuffer>
      Your browser does not support the audio element.
  </audio>
  <div id="ebook_image">
  </div>
  <nav class="navbar navbar-expand fixed-bottom">
    <div class="container">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>
      <div id="nav-collapse" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li>
            <a id="id_btn_setting" href="#" class="btn azm-social azm-size-64 azm-circle azm-long-shadow azm-linux"><i class="fa fa-cog"></i></a>
          </li>
          <li>
            <a id="id_btn_dump_trajectory" href="#" class="btn azm-social azm-size-64 azm-circle azm-long-shadow azm-linux"><i class="fa fa-download"></i></a>
          </li>
          <li>
            <a href="#" class="btn azm-social azm-size-64 azm-circle azm-long-shadow azm-linux"><i class="fa fa-check"></i></a>
          </li>
          <li>
            <a id="id_btn_play" href="#" class="btn azm-social azm-size-64 azm-circle azm-long-shadow azm-linux"><i class="fa fa-play"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- Page Content -->
  <!-- Bootstrap core JavaScript -->
</body>

</html>
